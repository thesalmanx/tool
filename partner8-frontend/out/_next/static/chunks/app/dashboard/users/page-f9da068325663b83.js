(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[242],{2714:(e,s,a)=>{"use strict";a.d(s,{J:()=>o});var t=a(5155),r=a(2115),l=a(968),n=a(2085),d=a(3999);let i=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.b,{ref:s,className:(0,d.cn)(i(),a),...r})});o.displayName=l.b.displayName},3948:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>M});var t=a(5155),r=a(2115),l=a(5695),n=a(6643),d=a(8482),i=a(7168),o=a(9852),c=a(2714),m=a(1461),u=a(6474),p=a(7863),h=a(5196),x=a(3999);let f=m.bL;m.YJ;let j=m.WT,N=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(m.l9,{ref:s,className:(0,x.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,t.jsx)(m.In,{asChild:!0,children:(0,t.jsx)(u.A,{className:"h-4 w-4 opacity-50"})})]})});N.displayName=m.l9.displayName;let y=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(m.PP,{ref:s,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(p.A,{className:"h-4 w-4"})})});y.displayName=m.PP.displayName;let b=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(m.wn,{ref:s,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})});b.displayName=m.wn.displayName;let v=r.forwardRef((e,s)=>{let{className:a,children:r,position:l="popper",...n}=e;return(0,t.jsx)(m.ZL,{children:(0,t.jsxs)(m.UC,{ref:s,className:(0,x.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,t.jsx)(y,{}),(0,t.jsx)(m.LM,{className:(0,x.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(b,{})]})})});v.displayName=m.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(m.JU,{ref:s,className:(0,x.cn)("px-2 py-1.5 text-sm font-semibold",a),...r})}).displayName=m.JU.displayName;let w=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(m.q7,{ref:s,className:(0,x.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,t.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(m.VF,{children:(0,t.jsx)(h.A,{className:"h-4 w-4"})})}),(0,t.jsx)(m.p4,{children:r})]})});w.displayName=m.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(m.wv,{ref:s,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=m.wv.displayName;var g=a(8145),k=a(9026),A=a(5452),_=a(4416);let C=A.bL,U=A.l9,R=A.ZL;A.bm;let T=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(A.hJ,{ref:s,className:(0,x.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});T.displayName=A.hJ.displayName;let z=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(R,{children:[(0,t.jsx)(T,{}),(0,t.jsxs)(A.UC,{ref:s,className:(0,x.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,t.jsxs)(A.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(_.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});z.displayName=A.UC.displayName;let F=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,x.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};F.displayName="DialogHeader";let J=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(A.hE,{ref:s,className:(0,x.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});J.displayName=A.hE.displayName;let S=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(A.VY,{ref:s,className:(0,x.cn)("text-sm text-muted-foreground",a),...r})});S.displayName=A.VY.displayName;var P=a(8524),E=a(4616),B=a(2318),$=a(7951),L=a(646),O=a(3717);let H=e=>{var s;let a="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===a.length&&(null==(s=a.pop())?void 0:s.split(";").shift())||null},q=e=>{document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")};function M(){let[e,s]=(0,r.useState)([]),[a,m]=(0,r.useState)(1),[u,p]=(0,r.useState)(1),[h,x]=(0,r.useState)(!0),[y,b]=(0,r.useState)(""),[A,_]=(0,r.useState)(""),[R,T]=(0,r.useState)(!1),[M,V]=(0,r.useState)(null),[D,I]=(0,r.useState)({username:"",email:"",password:"",role:"user",is_approved:!0}),Z=(0,l.useRouter)();(0,r.useEffect)(()=>{(async()=>{let e=H("access_token"),s=H("user_role");return e?"admin"!==s?Z.push("/dashboard"):await W():Z.push("/")})()},[Z]);let Y=()=>{q("access_token"),q("username"),q("user_role"),q("user_id"),q("user_email")},W=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;try{let a=H("access_token"),t=await fetch("http://localhost:8000/users?page=".concat(e,"&limit=").concat(10),{headers:{Authorization:"Bearer ".concat(a)}});if(t.ok){let e=await t.json();s(e.users),p(Math.ceil(e.total/10)),m(e.page)}else 401===t.status?(Y(),Z.push("/")):b("Failed to fetch users")}catch(e){b("Network error")}finally{x(!1)}},X=async e=>{try{let s=H("access_token"),a=await fetch("http://localhost:8000/approve_user/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(s)}});a.ok?(_("User approved successfully"),W(),setTimeout(()=>_(""),3e3)):401===a.status?(Y(),Z.push("/")):b("Failed to approve user")}catch(e){b("Network error")}},G=async e=>{try{let s=H("access_token"),a=await fetch("http://localhost:8000/promote_to_admin/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(s)}});a.ok?(_("User promoted to admin successfully"),W(),setTimeout(()=>_(""),3e3)):401===a.status?(Y(),Z.push("/")):b("Failed to promote user")}catch(e){b("Network error")}},K=async(e,s)=>{try{let a=H("access_token"),t=await fetch("http://localhost:8000/users/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(s)});t.ok?(_("User updated successfully"),W(),V(null),setTimeout(()=>_(""),3e3)):401===t.status?(Y(),Z.push("/")):b("Failed to update user")}catch(e){b("Network error")}},Q=async e=>{e.preventDefault();try{let e=H("access_token"),s=await fetch("http://localhost:8000/users",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(D)});if(s.ok)_("User created successfully"),T(!1),I({username:"",email:"",password:"",role:"user",is_approved:!0}),W(),setTimeout(()=>_(""),3e3);else if(401===s.status)Y(),Z.push("/");else{let e=await s.json();b(e.detail||"Failed to create user")}}catch(e){b("Network error")}};return h?(0,t.jsx)(n.A,{children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading users..."})]})})}):(0,t.jsx)(n.A,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"User Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage users, roles, and permissions"})]}),(0,t.jsxs)(C,{open:R,onOpenChange:T,children:[(0,t.jsx)(U,{asChild:!0,children:(0,t.jsxs)(i.$,{children:[(0,t.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"Create User"]})}),(0,t.jsxs)(z,{children:[(0,t.jsxs)(F,{children:[(0,t.jsx)(J,{children:"Create New User"}),(0,t.jsx)(S,{children:"Add a new user to the system with specified role and permissions."})]}),(0,t.jsxs)("form",{onSubmit:Q,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"username",children:"Username"}),(0,t.jsx)(o.p,{id:"username",value:D.username,onChange:e=>I({...D,username:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"email",children:"Email"}),(0,t.jsx)(o.p,{id:"email",type:"email",value:D.email,onChange:e=>I({...D,email:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"password",children:"Password"}),(0,t.jsx)(o.p,{id:"password",type:"password",value:D.password,onChange:e=>I({...D,password:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{htmlFor:"role",children:"Role"}),(0,t.jsxs)(f,{value:D.role,onValueChange:e=>I({...D,role:e}),children:[(0,t.jsx)(N,{children:(0,t.jsx)(j,{})}),(0,t.jsxs)(v,{children:[(0,t.jsx)(w,{value:"user",children:"User"}),(0,t.jsx)(w,{value:"admin",children:"Admin"})]})]})]}),(0,t.jsxs)(i.$,{type:"submit",className:"w-full",children:[(0,t.jsx)(B.A,{className:"h-4 w-4 mr-2"}),"Create User"]})]})]})]})]}),y&&(0,t.jsx)(k.Fc,{variant:"destructive",children:(0,t.jsx)(k.TN,{children:y})}),A&&(0,t.jsx)(k.Fc,{children:(0,t.jsx)(k.TN,{children:A})}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"All Users"}),(0,t.jsx)(d.BT,{children:"Manage user accounts, roles, and approval status"})]}),(0,t.jsxs)(d.Wu,{children:[(0,t.jsxs)(P.XI,{children:[(0,t.jsx)(P.A0,{children:(0,t.jsxs)(P.Hj,{children:[(0,t.jsx)(P.nd,{children:"Username"}),(0,t.jsx)(P.nd,{children:"Email"}),(0,t.jsx)(P.nd,{children:"Role"}),(0,t.jsx)(P.nd,{children:"Status"}),(0,t.jsx)(P.nd,{children:"Created"}),(0,t.jsx)(P.nd,{children:"Actions"})]})}),(0,t.jsx)(P.BF,{children:e.map(e=>(0,t.jsxs)(P.Hj,{children:[(0,t.jsx)(P.nA,{className:"font-medium",children:e.username}),(0,t.jsx)(P.nA,{children:e.email}),(0,t.jsx)(P.nA,{children:(0,t.jsxs)(g.E,{variant:"admin"===e.role?"default":"secondary",children:["admin"===e.role&&(0,t.jsx)($.A,{className:"h-3 w-3 mr-1"}),e.role]})}),(0,t.jsx)(P.nA,{children:(0,t.jsx)(g.E,{variant:e.is_approved?"default":"destructive",children:e.is_approved?"Approved":"Pending"})}),(0,t.jsx)(P.nA,{children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)(P.nA,{children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[!e.is_approved&&(0,t.jsxs)(i.$,{size:"sm",onClick:()=>X(e.id),children:[(0,t.jsx)(L.A,{className:"h-4 w-4 mr-1"}),"Approve"]}),"admin"!==e.role&&e.is_approved&&(0,t.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>G(e.id),children:[(0,t.jsx)($.A,{className:"h-4 w-4 mr-1"}),"Promote"]}),(0,t.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>V(e),children:[(0,t.jsx)(O.A,{className:"h-4 w-4 mr-1"}),"Edit"]})]})})]},e.id))})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,t.jsx)(i.$,{onClick:()=>W(a-1),disabled:1===a||h,variant:"outline",size:"sm",children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",a," of ",u]}),(0,t.jsx)(i.$,{onClick:()=>W(a+1),disabled:a===u||h,variant:"outline",size:"sm",children:"Next"})]})]})]}),(0,t.jsx)(C,{open:!!M,onOpenChange:()=>V(null),children:(0,t.jsxs)(z,{children:[(0,t.jsxs)(F,{children:[(0,t.jsx)(J,{children:"Edit User"}),(0,t.jsx)(S,{children:"Update user role and approval status."})]}),M&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{children:"Username"}),(0,t.jsx)(o.p,{value:M.username,disabled:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{children:"Email"}),(0,t.jsx)(o.p,{value:M.email,disabled:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.J,{children:"Role"}),(0,t.jsxs)(f,{value:M.role,onValueChange:e=>V({...M,role:e}),children:[(0,t.jsx)(N,{children:(0,t.jsx)(j,{})}),(0,t.jsxs)(v,{children:[(0,t.jsx)(w,{value:"user",children:"User"}),(0,t.jsx)(w,{value:"admin",children:"Admin"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"approved",checked:M.is_approved,onChange:e=>V({...M,is_approved:e.target.checked})}),(0,t.jsx)(c.J,{htmlFor:"approved",children:"Approved"})]}),(0,t.jsx)(i.$,{onClick:()=>K(M.id,{role:M.role,is_approved:M.is_approved}),className:"w-full",children:"Update User"})]})]})})]})})}},4021:(e,s,a)=>{Promise.resolve().then(a.bind(a,3948))},8524:(e,s,a)=>{"use strict";a.d(s,{A0:()=>d,BF:()=>i,Hj:()=>o,XI:()=>n,nA:()=>m,nd:()=>c});var t=a(5155),r=a(2115),l=a(3999);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",a),...r})})});n.displayName="Table";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",a),...r})});d.displayName="TableHeader";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...r})});i.displayName="TableBody",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});o.displayName="TableRow";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("th",{ref:s,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});c.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("td",{ref:s,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});m.displayName="TableCell",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},9852:(e,s,a)=>{"use strict";a.d(s,{p:()=>n});var t=a(5155),r=a(2115),l=a(3999);let n=r.forwardRef((e,s)=>{let{className:a,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...n})});n.displayName="Input"}},e=>{e.O(0,[711,758,539,468,321,441,964,358],()=>e(e.s=4021)),_N_E=e.O()}]);